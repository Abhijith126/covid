(this.webpackJsonpcovid=this.webpackJsonpcovid||[]).push([[0],{115:function(e,t,a){"use strict";(function(e){var n=a(10),r=a(13),o=a(16),i=a(14),c=a(0),l=a.n(c),s=a(48),u=a(72),d=a.n(u),p=a(15),m=a(88),h=a(95),f=a(63),g=a(133),b=a(130),v=function(e){var t=Object(p.useTranslate)("App")("Covid Data - Refactored");return l.a.createElement(m.a,{titleTemplate:"%s | ".concat(t),defaultTitle:t},l.a.createElement("html",{lang:e.language}))},y=function(e){return l.a.createElement(p.TranslatorProvider,{translations:e.translations},l.a.createElement(m.b,null,l.a.createElement(v,{language:e.language}),l.a.createElement(s.a,null,l.a.createElement("div",{className:"App",id:"router-container"},e.children))))},E=function(t){Object(i.a)(c,t);var a=Object(o.a)(c);function c(){var t;Object(n.a)(this,c),(t=a.call(this)).handleNewServiceWorker=function(e){t.registration=e.detail.registration,t.setState({newServiceWorkerDetected:!0})},t.handleLoadNewServiceWorkerAccept=function(){return t.props.onLoadNewServiceWorkerAccept(t.registration)},t.handleLanguageChange=function(e){return t.setState({language:e})},t.handleThemeChange=function(e){return t.setState({theme:e})},t.handleTutorialSeenChange=function(e){return t.setState({tutorialSeen:e})};var r=decodeURIComponent(e.location.hash);if(""!==r&&r!==e.location.hash){var o=r.replace(/[^#]*(#.*)$/,"$1");e.location.replace(o)}t.registration=!1;var i=navigator.language.toLowerCase();return t.state={initializing:!0,newServiceWorkerDetected:!1,language:h.a.hasOwnProperty(i)?i:"ca-es",theme:!1,tutorialSeen:!1},t}return Object(r.a)(c,[{key:"componentDidMount",value:function(){document.addEventListener("onNewServiceWorker",this.handleNewServiceWorker)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("onNewServiceWorker",this.handleNewServiceWorker)}},{key:"render",value:function(){var e=this,t=this.state,a=t.newServiceWorkerDetected,n=t.language,r=t.theme,o=t.tutorialSeen,i=h.a[n];return l.a.createElement(y,{translations:i,language:n},l.a.createElement(d.a,{parent:this,prefix:"App",blacklist:["newServiceWorkerDetected","initializing"],onParentStateHydrated:function(){return e.setState({initializing:!1})}}),l.a.createElement(f.a,{origin:"Dashboard"},l.a.createElement(g.a,{newServiceWorkerDetected:a,onLoadNewServiceWorkerAccept:this.handleLoadNewServiceWorkerAccept,language:n,onLanguageChange:this.handleLanguageChange,theme:r,onThemeChange:this.handleThemeChange,tutorialSeen:o,onTutorialSeen:this.handleTutorialSeenChange},l.a.createElement(f.a,{origin:"WidgetsList"},l.a.createElement(b.a,null)))))}}]),c}(l.a.Component);t.a=E}).call(this,a(43))},118:function(e,t,a){"use strict";(function(e){var n=a(19),r=a(36),o=a(6),i=a(0),c=a.n(i),l=a(15),s=a(4),u=a(186),d=a(22),p=a(30),m=a(194),h=a(37),f=a(139),g=a(138),b=a(79),v=a.n(b),y=a(140),E=a(119),j=a.n(E),w=a(141),O=a(97),C=a(136),k=a(137),S=a(24),D=a(25),T=a(90),x=Object(u.a)((function(e){return{toolbarIcon:Object(o.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),title:{flexGrow:1},drawerPaper:{position:"relative",whiteSpace:"nowrap",width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerPaperClose:Object(r.a)({overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:e.spacing(7)},e.breakpoints.up("sm"),{width:e.spacing(9)})}})),P=Object(l.translate)("Menu")((function(e){var t=x(),a=e.t;return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:t.toolbarIcon},c.a.createElement(g.a,{edge:"start",color:"inherit","aria-label":a("close menu"),onClick:e.handleDrawerClose},c.a.createElement(v.a,null)),c.a.createElement(h.a,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,className:t.title},a("Menu")),c.a.createElement(g.a,{"aria-label":a("close menu"),onClick:e.handleDrawerClose},c.a.createElement(j.a,null))),c.a.createElement(f.a,null),c.a.createElement(y.a,null,c.a.createElement(T.a,null)),c.a.createElement(f.a,null),c.a.createElement(y.a,null,c.a.createElement(T.b,null)))})),M=Object(l.translate)("Menu")((function(t){var a=x(),r=t.handleDrawerOpen,o=t.handleDrawerClose,i=t.open,l=t.newServiceWorkerDetected,u=t.t,h=Object(d.a)(),f=Object(w.a)(h.breakpoints.up("md")),g=f?p.a:m.a,b=e.browser&&/iPad|iPhone|iPod/.test(navigator.userAgent),v=function(e){return function(t){(!t||"keydown"!==t.type||"Tab"!==t.key&&"Shift"!==t.key)&&(e?r():o())}},y=function(e){e.preventDefault(),o(),t.onLoadNewServiceWorkerAccept()};return c.a.createElement(g,Object.assign({},f?{variant:"permanent"}:{anchor:"left",onClose:v(!1),onOpen:v(!0),disableBackdropTransition:!b,disableDiscovery:b},{classes:{paper:Object(s.a)(a.drawerPaper,!i&&a.drawerPaperClose)},open:i}),c.a.createElement(P,{handleDrawerClose:o}),l?c.a.createElement(O.a,{button:!0,component:function(e){var t=e.children,a=Object(n.a)(e,["children"]);return c.a.createElement("a",Object.assign({href:"/covid",style:{color:"green"},title:u("New update available!"),onClick:y},a),t)}},c.a.createElement(C.a,null,c.a.createElement(S.a,{icon:D.a,style:{fontSize:"1.5rem",color:"green"}})),c.a.createElement(k.a,{primary:u("Update!")})):null)}));t.a=M}).call(this,a(109))},120:function(e,t,a){"use strict";(function(e){var n,r=a(19),o=a(6),i=a(10),c=a(13),l=a(16),s=a(14),u=a(0),d=a.n(u),p=a(18),m=a(188),h=a(190),f=a(189),g=a(191),b=a(141),v=a(22),y=a(15),E=function(t){Object(s.a)(n,t);var a=Object(l.a)(n);function n(t){var r;return Object(i.a)(this,n),r=a.call(this),"history"in t&&""===t.history.location.hash||(console.log("CloseModal: ",{props:t}),e.setTimeout((function(){return t.history.push("#")}),10)),r}return Object(c.a)(n,[{key:"render",value:function(){return null}}]),n}(d.a.PureComponent),j=function(t){Object(s.a)(n,t);var a=Object(l.a)(n);function n(t){var r;return Object(i.a)(this,n),(r=a.call(this)).openModal=function(){return r.setState({modalIsOpen:!0})},r.closeModal=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"history"in t&&""===t.history.location.path||r.timer||(r.timer=e.setTimeout((function(){r.history.push("#"),r.timer=void 0}),10))},r.handleHistoryChange=function(e,t){var a=r.getPathState(e);r.setState(a)},r.history=t.history,r.state=Object(o.a)({},r.getPathState(t.location),{autoForce:!1,forced:t.force}),r}return Object(c.a)(n,[{key:"getPathState",value:function(e){var t=e.hash.replace(/[^#]*#(.*)$/,"$1");return{modalIsOpen:!!t.length&&"close"!==t,path:t,initialPath:this.state?this.state.initialPath:t}}},{key:"componentDidMount",value:function(){this.unlisten=this.history.listen(this.handleHistoryChange)}},{key:"componentWillUnmount",value:function(){this.unlisten(),this.timer&&e.clearTimeout(this.timer)}},{key:"componentDidUpdate",value:function(e,t){!1!==this.props.force&&this.props.force!==e.force&&this.state.forced!==this.props.force&&this.setState({forced:this.props.force}),this.state.autoForce===this.state.path&&this.setState({autoForce:!1}),t.path===this.state.forced&&t.path!==this.state.path&&!1!==this.state.initialPath&&this.state.initialPath.length>1&&this.state.autoForce!==this.state.initialPath&&this.setState({autoForce:this.state.initialPath})}},{key:"render",value:function(){var e=this.props,t=e.children,a=e.initializing,n=e.force,r=e.fullScreen,o=e.t,i=this.state,c=i.autoForce,l=i.path,s=i.forced;return a?null:!1!==n&&n!==l?d.a.createElement(p.a,{push:!0,to:{hash:n}}):!1!==c&&c!==l&&s!==l?d.a.createElement(p.a,{push:!0,to:{hash:c}}):d.a.createElement(m.a,{open:this.state.modalIsOpen,onClose:this.closeModal,fullScreen:r,"aria-labelledby":"modal_heading","aria-describedby":"modal_description"},d.a.createElement(f.a,null,d.a.createElement(p.d,{location:{pathname:l}},t,d.a.createElement(p.b,{render:function(e){return d.a.createElement(E,e)}}))),d.a.createElement(h.a,null,d.a.createElement(g.a,{autoFocus:!0,onClick:this.closeModal,color:"primary"},o("Close"))))}}]),n}(d.a.PureComponent),w=(n=j,function(e){var t=Object(v.a)(),a=Object(b.a)(t.breakpoints.down("sm"));return d.a.createElement(n,Object.assign({},e,{fullScreen:a}))}),O=function(e){Object(s.a)(a,e);var t=Object(l.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props,t=e.children,a=Object(r.a)(e,["children"]);return d.a.createElement(p.b,{path:":path(.*)",render:function(e){return d.a.createElement(w,Object(o.a)({children:t},a,{},e))}})}}]),a}(d.a.PureComponent);t.a=Object(y.translate)("ModalRouter")(O)}).call(this,a(43))},122:function(e,t,a){e.exports=a.p+"static/media/loading.73ea1e4a.svg"},129:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function r(e){if("serviceWorker"in navigator){if(new URL("/covid",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/covid","/service-worker.js");n?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):o(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):o(t,e)}))}}function o(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}},130:function(e,t,a){"use strict";a.d(t,"a",(function(){return ft}));var n,r=a(19),o=a(6),i=a(0),c=a.n(i),l=a(15),s=a(186),u=a(245),d=a(246),p=a(247),m=a(191),h=a(24),f=a(25),g=a(10),b=a(13),v=a(16),y=a(14),E=a(188),j=a(190),w=a(189),O=a(244),C=a(141),k=a(22),S=a(121),D=a.n(S),T=a(82),x=a(138),P=a(132),M=a(242),R=a(136),A=a(137),N=c.a.forwardRef((function(e,t){var a=e.onClick,n=e.option,r=e.icon,o=e.label;return c.a.createElement(M.a,{key:n,onClick:function(){return a(n)},ref:t},c.a.createElement(R.a,null,r),c.a.createElement(A.a,{primary:o||n}))})),V=Object(l.translate)("Widget")((function(e){var t=e.onClick,a=e.options,n=e.id,o=Object(r.a)(e,["onClick","options","id"]),i=c.a.useState(null),l=Object(T.a)(i,2),s=l[0],u=l[1],d=Boolean(s),p=function(){return u(null)},m=function(e){p(),t(e)};return c.a.createElement("div",null,c.a.createElement(x.a,{"aria-label":"widget actions","aria-controls":"widget-menu-".concat(n),"aria-haspopup":"true",onClick:function(e){return u(e.currentTarget)}},c.a.createElement(h.a,{icon:f.c})),s?c.a.createElement(P.a,{id:"widget-menu-".concat(n),anchorEl:s,keepMounted:!0,open:d,onClose:p,PaperProps:{style:{width:"20ch"}}},Object.keys(a).filter((function(e){return"view"!==e})).map((function(e){return c.a.createElement(N,{key:e,option:e,onClick:m,icon:a[e].icon,label:"function"===typeof a[e].label?a[e].label(o):a[e].label})}))):null)})),W=function(e){Object(y.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(g.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={open:!1},e.handleClickOpen=function(t){e.setState({open:t})},e.handleClose=function(){e.setState({open:!1})},e}return Object(b.a)(a,[{key:"render",value:function(){var e=this.state.open,t=this.props.id,a=this.props,n=a.sections,o=a.fullScreen,i=a.t,l=Object(r.a)(a,["sections","fullScreen","t"]),s=e?n[e].render:function(){},u=e?n[e].title:function(){};return c.a.createElement("div",null,c.a.createElement(V,Object.assign({options:n,id:t,onClick:this.handleClickOpen},l)),e?c.a.createElement(E.a,Object.assign({key:e,open:!0,onClose:this.handleClose},o?{}:{TransitionComponent:D.a},{fullScreen:o,"aria-labelledby":"draggable-dialog-title-".concat(t,"-").concat(e)}),c.a.createElement(O.a,{style:{cursor:"move"},id:"draggable-dialog-title-".concat(t,"-").concat(e)},c.a.createElement(u,Object.assign({},l,{t:i}))),c.a.createElement(w.a,null,c.a.createElement(s,Object.assign({},l,{t:i}))),c.a.createElement(j.a,null,c.a.createElement(m.a,{autoFocus:!0,onClick:this.handleClose,color:"primary"},i("Close")))):null)}}]),a}(c.a.PureComponent),L=Object(l.translate)("Widget")(W),I=(n=L,function(e){var t=Object(k.a)(),a=Object(C.a)(t.breakpoints.down("sm"));return c.a.createElement(n,Object.assign({},e,{fullScreen:a}))}),F=Object(s.a)((function(e){return{root:{height:"100%"}}})),U=function(e){var t=Object(o.a)({},e,{remove:{icon:c.a.createElement(h.a,{icon:f.h}),label:function(e){return(0,e.t)("Remove")},title:function(e){return(0,e.t)("Remove?")},render:function(e){var t=e.id,a=e.onRemove,n=e.t;return c.a.createElement(m.a,{startIcon:c.a.createElement(h.a,{icon:f.h}),onClick:function(){return a(t)},variant:"contained",color:"primary","aria-label":n("remove")},n("Confirm removal"))}}}),a=t.view.render;return Object(l.translate)("Widget")((function(e){var n=F(),o=(e.indexValues,Object(r.a)(e,["indexValues"])),i=c.a.createElement(I,Object.assign({},o,{sections:t}));return c.a.createElement(u.a,{className:n.root},c.a.createElement(d.a,{action:i,title:e.name,subheader:e.subtitle}),c.a.createElement(p.a,null,c.a.createElement(a,e)))}))},G=c.a.createContext((function(){})),H=function(e,t){var a=function(a){Object(y.a)(o,a);var n=Object(v.a)(o);function o(){var a;Object(g.a)(this,o);for(var i=arguments.length,l=new Array(i),s=0;s<i;s++)l[s]=arguments[s];return(a=n.call.apply(n,[this].concat(l))).dataHandler=function(n){var o=a.props,i=o.forwardedRef,l=Object(r.a)(o,["forwardedRef"]),s=n.onChangeData,u=void 0===s?function(){}:s,d=Object(r.a)(n,["onChangeData"]),p=Object.assign({},t,d,l);return c.a.createElement(e,Object.assign({ref:i,onChangeData:u},p))},a}return Object(b.a)(o,[{key:"render",value:function(){return c.a.createElement(G.Consumer,null,this.dataHandler)}}]),o}(c.a.Component),n=c.a.forwardRef((function(e,t){return c.a.createElement(a,Object.assign({},e,{forwardedRef:t}))}));return n.defaultProps=e.defaultProps,n},z=a(18),_=a(72),K=a.n(_),B=a(122),q=a.n(B),Y=function(e){var t=e.style,a=void 0===t?{}:t,n=e.restProps;return c.a.createElement("img",Object.assign({alt:"Loading...",src:q.a,style:Object(o.a)({width:"80%",margin:"auto",display:"block"},a)},n))},J=function(e){Object(y.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(g.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={initializing:!0,data:{}},e.onChangeData=function(t){e.setState({data:t})},e.stopInitializing=function(){e.setState({initializing:!1})},e}return Object(b.a)(a,[{key:"render",value:function(){var e=this.props,t=e.children,a=Object(r.a)(e,["children"]),n=this.state,i=n.initializing,l=n.data;return c.a.createElement(c.a.Fragment,null,c.a.createElement(K.a,{parent:this,prefix:"LocalStorageProvider",blacklist:["initializing"],onParentStateHydrated:this.stopInitializing}),i?c.a.createElement(Y,null):c.a.createElement(G.Provider,{value:Object(o.a)({onChangeData:this.onChangeData},a,{data:l})},t))}}]),a}(c.a.Component),$=function(e){Object(y.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(g.a)(this,a),(n=t.call(this,e)).unlisten=function(){},n.historyPush=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=n.props.paramsToString(e);n.history.location.pathname!==a&&(t?n.history.replace(a+n.history.location.hash):n.history.push(a+n.history.location.hash))},n.handleHistoryChange=function(e,t){},n.componentDidMount=function(){n.unlisten=n.history.listen(n.handleHistoryChange),!n.props.params.widgets.length&&n.props.data.widgets&&n.props.data.widgets.length&&n.historyPush(n.props.data,!0)},n.componentWillUnmount=function(){n.unlisten()},n.onChangeData=function(e){n.historyPush(Object(o.a)({},e),!0),n.props.onChangeData(Object(o.a)({},e))},n.history=e.history,n}return Object(b.a)(a,[{key:"render",value:function(){var e=this.props,t=e.children,a=e.data,n=e.params,i=(e.paramsFilter,e.paramsToString,e.history,e.onChangeData,Object(r.a)(e,["children","data","params","paramsFilter","paramsToString","history","onChangeData"]));return c.a.createElement(G.Provider,{value:Object(o.a)({onChangeData:this.onChangeData},i,{},a,{},n)},t)}}]),a}(c.a.Component),Q=H((function(e){var t=e.pathFilter,a=e.paramsFilter,n=e.paramsToString,o=Object(r.a)(e,["pathFilter","paramsFilter","paramsToString"]);return c.a.createElement(z.d,null,c.a.createElement(z.b,{path:t,render:function(e){var t=e.match.params,r=e.history,i=a(t);return c.a.createElement($,Object.assign({paramsFilter:a,paramsToString:n,history:r},o,{params:i}))}}))}),{data:{widgets:{type:"map"}}}),X=function(e){var t=e.children,a=e.pathFilter,n=e.paramsFilter,r=e.paramsToString;return c.a.createElement(J,null,c.a.createElement(Q,{pathFilter:a,paramsFilter:n,paramsToString:r},t))},Z=a(56),ee=a(36),te=a(4),ae=a(5),ne=a(250),re=a(99),oe=a(253),ie=a(123),ce=a(93),le=a.n(ce),se=a(94),ue=a(124),de=function(){},pe=function(){function e(t){var a=this;Object(g.a)(this,e),this.name="Common",this.controller=new AbortController,this.handleFetchErrors=function(e){return e.ok?e:new Error("".concat(a.name," backend: ").concat(e.statusText))},this.catchFetchErrors=function(e){"AbortError"===e.name?console.log("Connection aborted",e):(e.message="".concat(a.name," backend: ").concat(e.message),a.onError(e))},this.onUpdate=t&&t.onUpdate?t.onUpdate:de,this.onError=t&&t.onError?t.onError:de}return Object(b.a)(e,[{key:"abort",value:function(){this.controller.abort(),this.controller=new AbortController}}]),e}(),me=function(e){return 0===e.length?0:Object(Z.a)(e).map((function(e){return e.charCodeAt(0)})).reduce((function(e,t){var a=(e<<5)-e+t;return a&a}),0)},he=function e(t){var a=this;Object(g.a)(this,e),this.signal=null,this.result=null,this.lastModified=0,this.invalidated=!1,this.listeners=[],this.url="",this.handleFetchErrors=function(e){if(!e.ok)throw new Error("".concat(e.statusText));return e},this.catchFetchErrors=function(e){e.name,e.message="".concat(a.url,": ").concat(e.message),a.onError(e)},this.cleanFetch=function(){return a.signal=null},this.onError=function(e){a.listeners.forEach((function(t){t.onError(e)})),a.cleanFetch()},this.addListener=function(e,t){return a.listeners.push({onSuccess:e,onError:t}),a.signal||null!==a.result||a.fetch(),a.invalidated||null===a.result||new Promise((function(e,t){return e(a.result)})).then(e),function(){return a.removeListener(e)}},this.removeListener=function(e){var t=a.listeners.map((function(e,t){return{listener:e,index:t}})).find((function(t){return t.listener.onSuccess===e}));t?a.listeners.splice(t.index,1):console.warning("Remove listener from ".concat(a.url,": Listener not found")),a.signal&&0===a.listeners.length&&(a.signal.abort(),a.cleanFetch())},this.processSuccessFetch=function(e){var t=e.result,n=e.lastModified;return a.result=t,a.lastModified=n,a.listeners.forEach((function(e){return e.onSuccess(a.result)})),a.cleanFetch(),a.result},this.getLastModifiedFromResponse=function(e){return new Date(e.headers.get("last-modified"))},this.fetch=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};return a.signal=new AbortController,fetch(a.url,{signal:a.signal.signal}).then(a.handleFetchErrors).then((function(e){return e.json().then((function(t){return{result:t,lastModified:a.getLastModifiedFromResponse(e)}}))})).then(a.processSuccessFetch).then(e).catch(a.catchFetchErrors)},this.checkIfNeedUpdate=function(e,t){fetch(a.url,{method:"HEAD"}).then(a.handleFetchErrors).then(a.getLastModifiedFromResponse).then((function(e){return e>a.lastModified})).then(e).catch(t)},this.invalidate=function(){return new Promise((function(e,t){null!==a.result?(a.invalidated=!0,a.listeners.length>0?a.fetch(e):e()):e()}))},this.url=t},fe=new function e(){var t=this;Object(g.a)(this,e),this.data={},this.name="Cache manager",this.fetch=function(e,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},r=me(e);return r in t.data||(t.data[r]=new he(e)),t.data[r].addListener(a,n)},this.checkIfNeedUpdate=function(e,a,n){var r=me(e);t.data[r].checkIfNeedUpdate(a,n)},this.invalidate=function(e){var a=me(e);return a in t.data?t.data[a].invalidate():new Promise((function(e,t){e()}))}};Object.freeze(fe);var ge=fe,be="https://emibcn.github.io/covid-data/Maps",ve="".concat(be,"/days.json"),ye="".concat(be,"/Comarca.svg"),Ee="".concat(be,"/Municipi.svg"),je="".concat(be,"/MapData-Comarca-edat.json"),we="".concat(be,"/MapData-Comarca-pcrpos.json"),Oe="".concat(be,"/MapData-Comarca-risc.json"),Ce="".concat(be,"/MapData-Comarca-rt.json"),ke="".concat(be,"/MapData-Comarca-taxa_conf.json"),Se="".concat(be,"/MapData-Comarca-taxapcr.json"),De="".concat(be,"/MapData-Municipi-edat.json"),Te="".concat(be,"/MapData-Municipi-pcrpos.json"),xe="".concat(be,"/MapData-Municipi-risc.json"),Pe="".concat(be,"/MapData-Municipi-rt.json"),Me={days:ve,metadata:{risc:{title:"Risc de rebrot (iEPG) a poblaci\xf3 general",label:"Risc de rebrot (iEPG)",name:"Risc de rebrot (iEPG)",colors:[{color:"#400",nom:"Risc m\xe0xim",valor:210},{color:"#800",nom:"Risc extrem",valor:190},{color:"#c00",nom:"Risc alt\xedssim",valor:160},{color:"#f00",nom:"Risc molt alt",valor:130},{color:"#f40",nom:"Risc alt",valor:100},{color:"#f80",nom:"Risc mitj\xe0-alt",valor:70},{color:"#fc0",nom:"Risc mitj\xe0",valor:50},{color:"#ff0",nom:"Risc mitj\xe0-baix",valor:30},{color:"#cf0",nom:"Risc baix",valor:15},{color:"#8f4",nom:"Risc molt baix",valor:5},{color:"#4f8",nom:"Risc no nul",valor:1},{color:"#0fc",nom:"Risc m\xednim",valor:0}]},taxa_conf:{title:"Taxa setmanal de casos confirmats PCR a tota la poblaci\xf3",label:"Taxa confirmats per PCR",name:"Taxa setmanal de casos confirmats PCR",colors:[{color:"#a00",nom:">=300",valor:300},{color:"#d00",nom:">=200 i <300",valor:200},{color:"#f00",nom:">=100 i <200",valor:100},{color:"#f80",nom:">=75 i <100",valor:75},{color:"#fa0",nom:">=50 i <75",valor:50},{color:"#fc0",nom:">=25 i <50",valor:25},{color:"#0b0",nom:">=15 i <25",valor:15},{color:"#090",nom:"<15",valor:0}]},rt:{title:"Velocitat de propagaci\xf3 (Rt) a poblaci\xf3 general",label:"Rt",name:"Velocitat de propagaci\xf3 (Rt)",colors:[{color:"#f00",nom:">=2",valor:2},{color:"#f70",nom:">=1.5 i <2",valor:1.5},{color:"#fa0",nom:">=1.2 i <1.5",valor:1.2},{color:"#fc0",nom:">1 i <1.2",valor:1.00001},{color:"#0a0",nom:"<=1",valor:0}]},edat:{title:"Mitjana d'edat dels casos confirmats per PCR a tota la poblaci\xf3",label:"Mitjana edat",name:"Mitjana d'edat dels casos confirmats per PCR",colors:[{color:"#08519c",nom:">=60",valor:60},{color:"#3182bd",nom:">=50 i <60",valor:50},{color:"#6baed6",nom:">=40 i <50",valor:40},{color:"#9ecae1",nom:">=30 i <40",valor:30},{color:"#c6dbef",nom:">=20 i <30",valor:20},{color:"#eff3ff",nom:"< 20",valor:0}]},pcrpos:{title:"Percentatge de PCR positives a tota la poblaci\xf3",label:"% PCR +",name:"Percentatge de PCR positives",colors:[{color:"#a50026",nom:">=40%",valor:40},{color:"#d73027",nom:">=30% i <40%",valor:30},{color:"#f46d43",nom:">=20% i <30%",valor:20},{color:"#fdae61",nom:">=15% i <20%",valor:15},{color:"#fee08b",nom:">=10% i <15%",valor:10},{color:"#ffffbf",nom:">=8% i <10%",valor:8},{color:"#66bd63",nom:">=5% i <8%",valor:5},{color:"#1a9850",nom:">=3% i <5%",valor:3},{color:"#006837",nom:"<3%",valor:0}]},taxapcr:{title:"Taxa PCR per 100.000 habitants a tota la poblaci\xf3",label:"Taxa PCR",name:"Taxa PCR per 100.000 habitants",colors:[{color:"#08306b",nom:">=1000",valor:1e3},{color:"#08519c",nom:">=800 i <1000",valor:800},{color:"#2171b5",nom:">=600 i <800",valor:600},{color:"#4292c6",nom:">=500 i <600",valor:500},{color:"#6baed6",nom:">=400 i <500",valor:400},{color:"#9ecae1",nom:">=300 i <400",valor:300},{color:"#c6dbef",nom:">=200 i <300",valor:200},{color:"#deebf7",nom:">=100 i <200",valor:100},{color:"#f7fbff",nom:"<100",valor:0}]}},kind:{Comarca:{svg:ye,values:{risc:Oe,taxa_conf:ke,rt:Ce,edat:je,pcrpos:we,taxapcr:Se}},Municipi:{svg:Ee,values:{risc:xe,taxa_conf:"".concat(be,"/MapData-Municipi-taxa_conf.json"),rt:Pe,edat:De,pcrpos:Te,taxapcr:"".concat(be,"/MapData-Municipi-taxapcr.json")}}}},Re=function(e){Object(y.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(g.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).name="Maps JSON Files",e.timerDataUpdate=!1,e.officialUpdateTime="10:35".split(":"),e.days=function(e){return ge.fetch(Me.days,e)},e.data=function(e,t,a){return ge.fetch(Me.kind[e].values[t],a)},e.checkUpdate=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};ge.checkIfNeedUpdate(Me.days,(function(e){t(e)}),(function(t){console.error("".concat(e.name,": updating data from backend: "),t),a(t)}))},e.updateAll=function(e){!function(){var e=Object(ue.a)(le.a.mark((function e(t){var n,r,o,i,c,l;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Object(se.a)(a.kinds()),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=26;break}o=r.value,i=Object(se.a)(a.values(o)),e.prev=6,i.s();case 8:if((c=i.n()).done){e.next=15;break}return l=c.value,e.next=13,ge.invalidate(Me.kind[o].values[l]);case 13:e.next=8;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(6),i.e(e.t0);case 20:return e.prev=20,i.f(),e.finish(20);case 23:case 24:e.next=3;break;case 26:e.next=31;break;case 28:e.prev=28,e.t1=e.catch(1),n.e(e.t1);case 31:return e.prev=31,n.f(),e.finish(31);case 34:return e.next=38,ge.invalidate(Me.days);case 38:t(!0);case 39:case"end":return e.stop()}}),e,null,[[1,28,31,34],[6,17,20,23]])})));return function(t){return e.apply(this,arguments)}}()(e)},e.updateIfNeeded=function(t){e.checkUpdate((function(a){a?e.updateAll((function(){return t(!0)})):t(!1)}))},e.cancelUpdateSchedule=function(){e.timerDataUpdate&&clearTimeout(e.timerDataUpdate)},e.scheduleNextUpdate=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1===t?e.millisToNextUpdate():t;e.cancelUpdateSchedule(),e.timerDataUpdate=setTimeout((function(){return e.updateIfNeeded((function(t){return!(!a&&t)&&e.scheduleNextUpdate(!t&&3e5)}))}),n)},e.millisToNextUpdate=function(){var t=new Date,a=Object(ie.a)(Date,[t.getFullYear(),t.getMonth(),t.getDate()].concat(Object(Z.a)(e.officialUpdateTime),[0,0]))-t;return a<=0?a+864e5:a},e}return a}(pe);Re.kinds=function(){return Object.keys(Me.kind)},Re.values=function(e){return Object.keys(Me.kind[e].values)},Re.svg=function(e){return Me.kind[e].svg},Re.metadata=function(e,t){return Me.metadata[e][t]},Re.metaColors=function(e){return Re.metadata(e,"colors")},Re.metaTitle=function(e){return Re.metadata(e,"title")},Re.metaLabel=function(e){return Re.metadata(e,"label")},Re.metaName=function(e){return Re.metadata(e,"name")};var Ae=Re,Ne=a(70),Ve=a(134),We=a(96),Le=(a(182),function(){return c.a.createElement("span",null,"Error!")}),Ie=function(){return c.a.createElement(Y,null)},Fe=function(e){Object(y.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(g.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).svg=null,e.wrapperNodeSVG=c.a.createRef(),e.getSVG=function(){return e.wrapperNodeSVG.current.svgWrapper.querySelector("svg")},e.isSVGMounted=function(){return e.wrapperNodeSVG&&"current"in e.wrapperNodeSVG&&e.wrapperNodeSVG.current&&"svgWrapper"in e.wrapperNodeSVG.current&&e.wrapperNodeSVG.current.svgWrapper&&"querySelector"in e.wrapperNodeSVG.current.svgWrapper&&e.getSVG()},e.get_color_fons=function(t){var a=e.props.colors.find((function(e){return t>=e.valor}));return a?a.color:"fff"},e.setColorBackground=function(t,a,n){var r=t.querySelector("#".concat(n));r&&(r.style.fill=e.get_color_fons(a[n]))},e.omplir_colors=function(t){var a=e.props.valors[e.props.indexValues],n=e.setColorBackground.bind(Object(Ne.a)(e),t,a);Object.keys(a).forEach(n)},e.getTipContent=function(t){if(t&&e.isSVGMounted()){var a=e.props.valors[e.props.indexValues],n=e.svg.querySelector("#".concat(t));if(!n)return"";var r=n.getAttribute("label");return c.a.createElement(c.a.Fragment,null,c.a.createElement("h1",null,r),e.props.label,": ",a[t])}return""},e.setTooltipData=function(t){var a="mapa-".concat(e.props.id);t.querySelectorAll(".map_elem").forEach((function(e){e.setAttribute("data-tip",e.id),e.setAttribute("data-for",a)}))},e.beforeInjection=function(t){e.svg=t,e.omplir_colors(t),e.setTooltipData(t)},e.afterInjection=function(t,a){if(t)throw Error(t);We.a.rebuild(),e.svg=a,e.omplir_colors(e.svg)},e.updateColorsIfPossible=function(){e.isSVGMounted()&&e.svg&&e.omplir_colors(e.svg)},e}return Object(b.a)(a,[{key:"componentDidUpdate",value:function(e,t){this.updateColorsIfPossible()}},{key:"componentDidMount",value:function(){this.updateColorsIfPossible()}},{key:"render",value:function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(Ve.a,{src:this.props.mapSrc,ref:this.wrapperNodeSVG,role:"img","aria-label":"Description of the overall image",beforeInjection:this.beforeInjection,afterInjection:this.afterInjection,evalScripts:"never",fallback:Le,loading:Ie,renumerateIRIElements:!1}),c.a.createElement(We.a,{id:"mapa-".concat(this.props.id),getContent:this.getTipContent}))}}]),a}(c.a.Component);Fe.defaultProps={dies:[],valors:[],indexValues:0,label:"Index"};var Ue=Fe,Ge=a(256),He=a(249),ze=a(248),_e=a(252),Ke=a(139),Be=Object(s.a)((function(e){return{formControl:{minWidth:120},selectEmpty:{marginTop:e.spacing(2)}}})),qe=function(e){var t=Be(),a=e.label,n=e.help,o=e.id,i=e.options,l=Object(r.a)(e,["label","help","id","options"]);return c.a.createElement("div",{style:{margin:"0 auto",display:"block"}},c.a.createElement(ze.a,{required:!0,className:t.formControl},c.a.createElement(Ge.a,{htmlFor:o},a),c.a.createElement(_e.a,Object.assign({native:!0},l,{"aria-describedby":"helper-text-".concat(o),inputProps:{name:a,id:o}}),i.map((function(e){return c.a.createElement("option",{key:"v_".concat(e.value),value:e.value},e.label)}))),n?c.a.createElement(He.a,{id:"helper-text-".concat(o)},n):null))},Ye=Ae.kinds().map((function(e){return{value:e,label:e}})),Je=Object(l.translate)("Widget/Map/Edit")((function(e){var t=e.t,a=Object(r.a)(e,["t"]);return c.a.createElement(qe,Object.assign({options:Ye,label:t("Type"),help:t("Select the regions type to show")},a))})),$e=Ae.kinds().reduce((function(e,t){return e[t]=Ae.values(t).map((function(e){return{value:e,label:Ae.metaName(e)}})),e}),{}),Qe=Object(l.translate)("Widget/Map/Edit")((function(e){var t=e.kind,a=e.t,n=Object(r.a)(e,["kind","t"]);return c.a.createElement(qe,Object.assign({label:a("Values"),help:a("Select the data origin"),options:$e[t]},n))})),Xe=function(e){Object(y.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(g.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).onChangeMapKind=function(t){return e.props.onChangeMapKind(t.target.value)},e.onChangeMapValue=function(t){return e.props.onChangeMapValue(t.target.value)},e}return Object(b.a)(a,[{key:"render",value:function(){var e=this.props,t=e.mapKind,a=e.mapValue;return c.a.createElement("div",{style:{textAlign:"left"}},c.a.createElement(Je,{value:t,onChange:this.onChangeMapKind}),c.a.createElement(Ke.a,{style:{margin:"2em 0"}}),c.a.createElement(Qe,{kind:t,value:a,onChange:this.onChangeMapValue}))}}]),a}(c.a.PureComponent),Ze=function(e){return c.a.createElement("table",{style:{margin:"0 auto",marginTop:".5em"}},c.a.createElement("tbody",null,e.colors.map((function(t,a){return c.a.createElement("tr",{key:a},c.a.createElement("td",{style:{paddingRight:20,textAlign:"left"}},t.nom),c.a.createElement("td",null,0===a?"> ".concat(t.valor):"".concat(t.valor,"-").concat(e.colors[a-1].valor)),c.a.createElement("td",{style:{backgroundColor:t.color,width:50,border:"1px solid #000"}}))}))))},et=U({view:{icon:c.a.createElement(h.a,{icon:f.d}),label:function(e){return(0,e.t)("View")},title:function(e){return e.name},render:function(e){return c.a.createElement(c.a.Fragment,null,null===e.mapData?c.a.createElement(Y,null):c.a.createElement(Ue,{label:e.label,dies:e.days,valors:e.mapData.valors,mapSrc:Ae.svg(e.mapKind),indexValues:e.indexValues,colors:e.colors,id:e.id}))}},edit:{icon:c.a.createElement(h.a,{icon:f.b}),label:function(e){return(0,e.t)("Edit")},title:function(e){return(0,e.t)("Edit map parameters")},render:function(e){return c.a.createElement(Xe,{mapKind:e.mapKind,mapValue:e.mapValue,onChangeMapKind:e.onChangeMapKind,onChangeMapValue:e.onChangeMapValue})}},legend:{icon:c.a.createElement(h.a,{icon:f.e}),label:function(e){return(0,e.t)("Legend")},title:function(e){return e.title},render:function(e){return c.a.createElement(Ze,{colors:e.colors,subtitle:e.days[e.indexValues]})}}}),tt=function(e){Object(y.a)(a,e);var t=Object(v.a)(a);function a(e){var n;Object(g.a)(this,a),(n=t.call(this,e)).getMeta=function(e){return{colors:Ae.metaColors(e),title:Ae.metaTitle(e),label:Ae.metaLabel(e),name:Ae.metaLabel(e)}},n.updateData=function(){var e=n.props,t=e.mapKind,a=e.mapValue;n.cancelDataUpdate&&n.cancelDataUpdate(),n.cancelDataUpdate=n.MapData.data(t,a,(function(e){t===n.props.mapKind&&a===n.props.mapValue&&n.setState({mapData:e})}))},n.onChangeMapKind=function(e){var t=n.props.mapValue;n.setState({mapData:null}),n.props.onChangeData(n.props.id,{mapKind:e,mapValue:t})},n.onChangeMapValue=function(e){var t=n.props.mapKind;n.setState(Object(o.a)({mapData:null},n.getMeta(e))),n.props.onChangeData(n.props.id,{mapKind:t,mapValue:e})},n.MapData=new Ae,n.cancelDataUpdate=!1;var r=e.mapKind,i=e.mapValue;return n.state=Object(o.a)({mapData:null,mapKindDefault:r,mapValueDefault:i},n.getMeta(i)),n}return Object(b.a)(a,[{key:"componentDidMount",value:function(){this.updateData()}},{key:"componentDidUpdate",value:function(e,t){t.mapData!==this.state.mapData&&null===this.state.mapData?this.updateData():this.props.mapKind===e.mapKind&&this.props.mapValue===e.mapValue||this.setState({mapData:null})}},{key:"render",value:function(){var e=this.props,t=e.days,a=e.indexValues,n=e.id,r=e.mapKind,o=e.mapValue,i=this.state,l=i.mapData,s=i.mapKindDefault,u=i.mapValueDefault,d=i.colors,p=i.title,m=i.label,h=i.name;return c.a.createElement("div",{style:{minWidth:"200px",height:"100%",paddingTop:".3em",flex:"1 1 0px"}},c.a.createElement(et,{id:n,mapKind:r,mapValue:o,mapKindDefault:s,mapValueDefault:u,onChangeMapKind:this.onChangeMapKind,onChangeMapValue:this.onChangeMapValue,onRemove:this.props.onRemove,mapData:l,indexValues:a,days:t,colors:d,title:p,label:m,name:h}))}}]),a}(c.a.Component),at=Ae.kinds()[0],nt=Ae.values(at)[0];tt.defaultProps={mapKind:at,mapValue:nt,onChangeData:function(){},onRemove:function(){}};var rt=tt,ot=function(){function e(){var t=this;Object(g.a)(this,e),this.timer=!1,this.clear=function(){!1!==t.timer&&(clearTimeout(t.timer),t.timer=!1)}}return Object(b.a)(e,[{key:"start",value:function(e){this.timer=setTimeout(this.clear,e)}},{key:"run",value:function(e,t,a){e&&this.clear(),!1===this.timer&&(this.start(t),a())}}]),e}(),it=a(255),ct=(a(183),Object(s.a)((function(e){return{popper:{zIndex:1},tooltip:{fontSize:"1rem"}}}))),lt=function(e){var t=e.children,a=e.open,n=e.value,r=ct();return c.a.createElement(oe.a,{open:a,enterTouchDelay:0,placement:"bottom",title:n,classes:{popper:r.popper,tooltip:r.tooltip},arrow:!0},t)},st=function(e){Object(y.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(g.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).onChange=function(){e.props.isPlaying?e.props.onPause():e.props.onPlay()},e}return Object(b.a)(a,[{key:"render",value:function(){var e=this.props,t=e.className,a=e.t;return c.a.createElement(oe.a,{title:a("Toggle play status"),"aria-label":this.props.isPlaying?a("pause"):a("play")},c.a.createElement("div",{className:"playpause ".concat(t||"")},c.a.createElement("input",{type:"checkbox",id:"playpause",name:"check",checked:!this.props.isPlaying,onChange:this.onChange,"aria-label":a("Toggle play status")}),c.a.createElement("label",{htmlFor:"playpause",style:{borderLeftColor:""}})))}}]),a}(c.a.PureComponent),ut=Object(l.translate)("PlayPause")(st),dt=function(e){Object(y.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(g.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isPlaying:!1},e.timer=!1,e.onPause=function(){e.clearTimer(),e.setState({isPlaying:!1})},e.onPlay=function(){e.setTimer(),e.setState({isPlaying:!0})},e.setTimer=function(){e.clearTimer(),e.timer=setTimeout(e.updatePlay,40)},e.clearTimer=function(){e.timer&&(clearTimeout(e.timer),e.timer=!1)},e.updatePlay=function(){e.props.onChange({},e.props.value<e.props.max-1?e.props.value+1:0),e.setTimer()},e}return Object(b.a)(a,[{key:"componentWillUnmount",value:function(){this.clearTimer()}},{key:"render",value:function(){var e=this.state.isPlaying,t=this.props,a=t.classes,n=void 0===a?{}:a,i=Object(r.a)(t,["classes"]),l=n.playPause,s=Object(r.a)(n,["playPause"]);return c.a.createElement(c.a.Fragment,null,c.a.createElement(it.a,Object.assign({ValueLabelComponent:lt,step:1,min:0,style:{margin:"0 1em"},classes:Object(o.a)({},s)},i)),c.a.createElement(ut,{className:l,onPlay:this.onPlay,onPause:this.onPause,isPlaying:e}))}}]),a}(c.a.PureComponent),pt=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},mt=function(e){Object(y.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(g.a)(this,a),(n=t.call(this,e)).state={days:null,current:null,marks:[],marksSmall:[]},n.widgetsIds=[],n.throtle=new ot,n.MapData=new Ae,n.updateIDs=function(e){for(;n.widgetsIds.length<e;)n.widgetsIds.push("a-"+pt()+pt()+"-"+pt()+"-"+pt()+"-"+pt()+"-"+pt()+pt()+pt())},n.onSetDate=function(e,t){return n.throtle.run(!1,10,(function(){return n.setState({current:t})}))},n.sliderTipFormatter=function(e){return n.state.days[e]},n.widgetType={map:rt},n.onAdd=function(){var e=Object(Z.a)(n.props.widgets);return e.push({type:"map"}),n.updateIDs(e.length),n.props.onChangeData({widgets:e})},n.onRemove=function(e){var t=n.props.widgets.filter((function(t,a){return n.widgetsIds[a]!==e}));return n.widgetsIds=n.widgetsIds.filter((function(t){return t!==e})),n.props.onChangeData({widgets:t})},n.onChangeData=function(e,t){var a=n.props.widgets.map((function(a,r){return Object(o.a)({},a,{},e===n.widgetsIds[r]?{payload:t}:{})}));return n.props.onChangeData({widgets:a})},"widgets"in e&&n.updateIDs(e.widgets.length),n}return Object(b.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.MapData.days((function(t){var a=!e.state.current||!e.state.days||e.state.current===e.state.days.length-1,n=t.map((function(e,t){return{day:e,index:t}})).filter((function(e){var t=e.day;e.index;return/^0?1\//.test(t)})).map((function(e){var t=e.day;return{value:e.index,label:t.replace(/^0/,"")}}));e.setState(Object(o.a)({days:t,marks:n,marksSmall:n.map((function(e){return{value:e.value}}))},a?{current:t.length-1}:{})),e.MapData.scheduleNextUpdate()}))}},{key:"componentWillUnmount",value:function(){this.MapData.cancelUpdateSchedule(),this.throtle.clear()}},{key:"componentDidUpdate",value:function(){this.updateIDs(this.props.widgets.length)}},{key:"render",value:function(){var e=this;if(!this.state.days)return c.a.createElement(Y,null);var t=this.props,a=t.widgets,n=t.classes,r=t.showMarkLabels,o=t.t,i=this.state,l=i.days,s=i.current,u=i.marks,d=i.marksSmall,p=Object(te.a)(n.paper,n.fixed);return c.a.createElement(c.a.Fragment,null,c.a.createElement(re.a,{className:p,elevation:2},c.a.createElement("div",{className:n.appBarSpacer}),c.a.createElement("div",{className:n.sliderContainer},c.a.createElement(oe.a,{title:o("Add a graph"),"aria-label":o("add")},c.a.createElement(x.a,{onClick:this.onAdd,color:"primary","aria-label":o("add"),className:n.addButton},c.a.createElement(h.a,{icon:f.f}))),c.a.createElement(dt,{classes:{playPause:n.playPause},max:l.length-1,value:s||0,onChange:this.onSetDate,valueLabelFormat:this.sliderTipFormatter,getAriaValueText:this.sliderTipFormatter,marks:r?u:d,valueLabelDisplay:r?null:"on"}))),c.a.createElement(ne.a,{container:!0,spacing:3,className:n.widgetsContainer},a.map((function(t,a){var n=e.widgetType[t.type];return c.a.createElement(ne.a,{item:!0,xs:12,sm:6,md:4,lg:3,key:e.widgetsIds[a]},c.a.createElement(n,Object.assign({id:e.widgetsIds[a],key:e.widgetsIds[a],days:l,indexValues:s,onChangeData:e.onChangeData,onRemove:e.onRemove},t.payload)))}))))}}]),a}(c.a.PureComponent),ht=Object(l.translate)("WidgetsList")(H(Object(ae.a)((function(e){var t,a;return{appBarSpacer:e.mixins.toolbar,widgetsContainer:{zIndex:10,width:"100%",margin:0},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixed:{position:"sticky",top:0,zIndex:1,padding:0,paddingBottom:1},sliderContainer:(a={display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:e.spacing(1),marginBottom:e.spacing(.5),marginLeft:e.spacing(1),marginRight:e.spacing(1)},Object(ee.a)(a,e.breakpoints.up("md"),{marginBottom:e.spacing(1),alignItems:"flex-start"}),Object(ee.a)(a,"@media (pointer: coarse)",(t={},Object(ee.a)(t,e.breakpoints.up("md"),{marginTop:e.spacing(.5),paddingBottom:e.spacing(1)}),Object(ee.a)(t,e.breakpoints.down("sm"),{paddingBottom:e.spacing(.1)}),t)),a),addButton:Object(ee.a)({padding:0,fontSize:e.spacing(4)},e.breakpoints.up("md"),{fontSize:e.spacing(6)}),playPause:Object(ee.a)({fontSize:e.spacing(2)},e.breakpoints.up("md"),{fontSize:e.spacing(3)})}}))(function(e){return function(t){var a=Object(k.a)(),n=Object(C.a)(a.breakpoints.up("md"));return c.a.createElement(e,Object.assign({},t,{showMarkLabels:n}))}}(mt)))),ft=function(e){return c.a.createElement(X,{pathFilter:"/:widgets*",paramsFilter:function(t){var a,n=t.widgets;try{a=n.split("/").map((function(e){return JSON.parse(e)}))}catch(r){a=[]}return Object.assign({},e,{widgets:a})},paramsToString:function(e){var t=e.widgets.map((function(e){return JSON.stringify({type:e.type,payload:e.payload})})).join("/");return"/".concat(t)}},c.a.createElement(ht,e))}},133:function(e,t,a){"use strict";var n=a(82),r=a(19),o=a(0),i=a.n(o),c=a(18),l=a(4),s=a(15),u=a(186),d=a(238),p=a(141),m=a(131),h=a(237),f=a(251),g=a(239),b=a(240),v=a(37),y=a(138),E=a(241),j=a(236),w=a(79),O=a.n(w),C=a(118),k=a(120),S=a(63),D=a(10),T=a(13),x=a(16),P=a(14),M=a(24),R=a(25),A=function(e){Object(P.a)(a,e);var t=Object(x.a)(a);function a(){return Object(D.a)(this,a),t.apply(this,arguments)}return Object(T.a)(a,[{key:"render",value:function(){var e=this.props.t;return i.a.createElement(i.a.Fragment,null,i.a.createElement("h1",{id:"modal_heading"},i.a.createElement(M.a,{icon:R.e,style:{marginRight:".5em"}}),e("About")),i.a.createElement("div",{id:"modal_description",style:{textAlign:"left"}},i.a.createElement("p",null,e("This applications displays public information extracted from the official web")," ",i.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://dadescovid.cat"},"https://dadescovid.cat"),"."),i.a.createElement("p",null,e("The aim of this application is to display the data in different ways than the original, improving performance and adding more value to it.")),i.a.createElement("h3",null,e("Want more information?")),i.a.createElement("p",null,i.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/emibcn/covid"},e("The source code is publicly available."))," ",e("There, you can find more information about how it has been done, licence and credits.")),i.a.createElement("h3",null,e("Found a bug? Have a petition? Want to help somehow?")),i.a.createElement("p",null,i.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/emibcn/covid/issues"},e("Create an issue at GitHub."))),i.a.createElement("h3",null,e("Licenses")),i.a.createElement("p",null,e("The application, scripts and documentation in")," ",i.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/emibcn/covid"},e("this project"))," ",e("are released under the")," ",i.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/emibcn/covid/blob/master/LICENSE"},"GNU General Public License v3.0"),"."),i.a.createElement("p",null,e("The scripts and documentation published in")," ",i.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/emibcn/covid-data/"},"covid-data")," ",e("are also released under the")," ",i.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/emibcn/covid/blob/master/LICENSE"},"GNU General Public License v3.0"),"."),i.a.createElement("p",null,e("The data scrapped and published in")," ",i.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/emibcn/covid-data/"},"covid-data")," ",e("is licensed by their owner, the")," ",i.a.createElement("em",null,"Generalitat de Catalunya"),e(", under their own conditions ("),i.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"http://opendatacommons.org/licenses/by/1.0/"},"Open Data Commons Attribution License"),e(", until now).")," ",e("See more at the")," ",i.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://analisi.transparenciacatalunya.cat/Salut/Dades-setmanals-de-COVID-19-per-comarca/jvut-jxu8"},e("dataset API documentation")),".")))}}]),a}(i.a.Component),N=Object(s.translate)("About")(A),V=Object(s.translate)("Copyright")((function(e){var t=e.t;return i.a.createElement(v.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",i.a.createElement(j.a,{color:"inherit",href:"https://github.com/emibcn/covid"},t("Source code of:")," ",i.a.createElement("em",null,t("Covid Data")," ",i.a.createElement("code",null,t("Refactored"))))," ",(new Date).getFullYear(),".")})),W=function(e){var t=Object(p.a)("(prefers-color-scheme: dark)"),a=e.type,n=e.children,r=i.a.useMemo((function(){return Object(m.a)({palette:{type:a||(t?"dark":"light")}})}),[t,a]);return i.a.createElement(h.a,{theme:r},i.a.createElement(d.a,null),n)},L=Object(u.a)((function(e){return{root:{display:"flex"},toolbar:{paddingRight:24},appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},menuButtonHidden:{display:"none"},title:{flexGrow:1},content:{flexGrow:1,height:"100vh",overflow:"auto"},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)}}})),I=function(e){return i.a.createElement(k.a,{force:!1},i.a.createElement(c.b,{exact:!0,path:"about",render:function(e){return t="About",a=i.a.createElement(N,null),i.a.createElement(S.a,{origin:t,key:t},a);var t,a}}))};t.a=Object(s.translate)("Widget")((function(e){var t=L(),a=e.children,o=e.theme,c=e.t,s=Object(r.a)(e,["children","theme","t"]),u=i.a.useState(!1),d=Object(n.a)(u,2),p=d[0],m=d[1],h=function(){m(!0)};return i.a.createElement(W,{type:o},i.a.createElement(I,null),i.a.createElement("div",{id:"root",className:t.root},i.a.createElement(g.a,{position:"absolute",className:Object(l.a)(t.appBar,p&&t.appBarShift)},i.a.createElement(b.a,{className:t.toolbar},i.a.createElement(y.a,{edge:"start",color:"inherit","aria-label":"open menu",onClick:h,className:Object(l.a)(t.menuButton,p&&t.menuButtonHidden)},i.a.createElement(O.a,null)),i.a.createElement(v.a,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,className:t.title},c("Covid Data")," ",i.a.createElement("code",null,c("Refactored"))))),i.a.createElement(C.a,Object.assign({handleDrawerOpen:h,handleDrawerClose:function(){m(!1)},open:p},s)),i.a.createElement("main",{className:t.content},a,i.a.createElement(E.a,{maxWidth:"lg",className:t.container},i.a.createElement(f.a,{pt:4},i.a.createElement(V,null))))))}))},158:function(e,t,a){e.exports=a(159)},159:function(e,t,a){"use strict";a.r(t),function(e){var t=a(0),n=a.n(t),r=a(11),o=a.n(r),i=a(115),c=a(129);o.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(i.a,{onLoadNewServiceWorkerAccept:function(t){var a;t.waiting&&(navigator.serviceWorker.addEventListener("controllerchange",(function(t){a||(a=!0,console.log("Controller loaded"),e.location.reload(!0))})),t.waiting.postMessage("skipWaiting"))}})),document.getElementById("root")),c.a({onUpdate:function(e){var t=new CustomEvent("onNewServiceWorker",{detail:{registration:e}});document.dispatchEvent(t)}})}.call(this,a(43))},182:function(e,t,a){},183:function(e,t,a){},63:function(e,t,a){"use strict";var n=a(10),r=a(13),o=a(16),i=a(14),c=a(0),l=a.n(c),s=a(24),u=a(25),d=a(15),p=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).reloadApp=function(){r.sendEvent("Reload from Error"),window.location.reload()},r.state={hasError:!1,errorMessage:"",errorStack:"",info:""},r}return Object(r.a)(a,[{key:"componentDidCatch",value:function(e,t){this.setState({info:t.componentStack}),this.sendEvent("Unhandled Error")}},{key:"sendEvent",value:function(e){this.props.sendEvent(e,this.props.origin,this.state.errorMessage)}},{key:"render",value:function(){if(this.state.hasError){var e=this.props.t,t=this.state,a=t.errorMessage,n=t.errorStack;return l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",null,e("Something went wrong :(")),l.a.createElement("button",{onClick:this.reloadApp,style:{padding:"1em"}},l.a.createElement(s.a,{icon:u.g,style:{margin:"0 .8em 0 .2em"}}),e("Try reloading the app to recover from it")),l.a.createElement("div",{style:{textAlign:"left"}},l.a.createElement("h3",null,a),l.a.createElement("details",{style:{whiteSpace:"pre-wrap"}},n)))}return this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0,errorMessage:e.message,errorStack:e.stack}}}]),a}(l.a.PureComponent);p.defaultProps={origin:"No name",sendEvent:function(){}},t.a=Object(d.translate)("ErrorCatcher")(p)},90:function(e,t,a){"use strict";a.d(t,"a",(function(){return m})),a.d(t,"b",(function(){return h}));var n=a(0),r=a.n(n),o=a(48),i=a(15),c=a(97),l=a(136),s=a(137),u=a(24),d=a(25),p=function(e){var t=e.icon,a=e.primary,n=e.to,i=r.a.useMemo((function(){return r.a.forwardRef((function(e,t){return r.a.createElement(o.b,Object.assign({to:n,ref:t},e))}))}),[n]);return r.a.createElement("li",null,r.a.createElement(c.a,{button:!0,component:i},t?r.a.createElement(l.a,null,t):null,r.a.createElement(s.a,{primary:a})))},m=Object(i.translate)("Menu")((function(e){var t=e.t;return r.a.createElement("div",null,r.a.createElement(p,{to:"#about",primary:t("About"),icon:r.a.createElement(u.a,{style:{fontSize:"1.5rem"},icon:d.e})}))})),h=function(e){return r.a.createElement("div",null)}},95:function(e,t,a){"use strict";var n=a(6),r={"Covid Data - Refactored":"Dades Covid - Refactoritzada","Covid Data":"Dades Covid",Refactored:"Refactoritzada",Close:"Tanca",About:"Quant a...",Help:"Ajuda",Yes:"Si",No:"No",or:"o"},o={locale:"fr",App:Object(n.a)({},r),Copyright:Object(n.a)({},r,{"Source code of:":"Codi font de"}),ErrorCatcher:Object(n.a)({},r,{"Something went wrong :(":"Alguna cosa ha anat malament :(","Try reloading the app to recover from it":"Intenta recarregar l'aplicaci\xf3 per a continuar"}),Menu:Object(n.a)({},r,{Menu:"Men\xfa","Update!":"Actualitza!","New update available!":"Nova versi\xf3 disponible!"}),ModalRouter:Object(n.a)({},r),About:Object(n.a)({},r,{"This applications displays public information extracted from the official web":"Aquesta aplicaci\xf3 mostra informaci\xf3 p\xfablica extreta de la p\xe1gina web oficial","The aim of this application is to display the data in different ways than the original, improving performance and adding more value to it.":"La finalitat d'aquesta aplicaci\xf3 \xe9s mostrar les dades de formes diferents a l'original, millorant-ne el rendiment i afegint-ne m\xe9s valor.","Want more information?":"Vols m\xe9s informaci\xf3?","The source code is publicly available.":"El codi font \xe9s p\xfablicament accessible.","There, you can find more information about how it has been done, licence and credits.":"All\xe0 trobar\xe0s m\xe9s informaci\xf3 sobre com s'ha fet, llic\xe8ncies i cr\xe8dits.","Found a bug? Have a petition? Want to help somehow?":"Has trobat un error? Tens una petici\xf3? Vols ajudar d'alguna forma?","Create an issue at GitHub.":"Crea una incid\xe8ncia a GitHub",Licenses:"Llic\xe8ncies","The application, scripts and documentation in":"L'aplicaci\xf3, scripts i documentaci\xf3 a","this project":"aquest projecte","are released under the":"han sigut alliberats sota la","The scripts and documentation published in":"Els scripts i documentaci\xf3 publicats a","are also released under the":"tamb\xe9 estan alliberades sota la","The data scrapped and published in":"Les dades aconseguides de la web oficial i publicades a","is licensed by their owner, the":"ha estat llicenciada pel seu propietari, la",", under their own conditions (":", sota les seves pr\xf2pies condicions (",", until now).":", fins ara).","See more at the":"Pots trobar m\xe9s informaci\xf3 a la","dataset API documentation":"documentaci\xf3 de l'API del dataset"}),Help:Object(n.a)({},r),WidgetsList:Object(n.a)({},r,{"Add a graph":"Afegeix un gr\xe0fic",add:"afegeix"}),PlayPause:Object(n.a)({},r,{"Toggle play status":"Commuta l'estat de reproducci\xf3",play:"Reprodueix",pause:"Pausa"}),Widget:Object(n.a)({},r,{remove:"elimina",Remove:"Elimina","Remove?":"Eliminar?","Confirm removal":"Confirma l'eliminaci\xf3",View:"Veure",Edit:"Edita","Edit map parameters":"Edita les opcions del mapa",Legend:"Llegenda"}),"Widget/Map/Edit":{Type:"Tipus","Select the regions type to show":"Selecciona el tipus de regions a mostrar",Values:"Valors","Select the data origin":"Selecciona l'origen de les dades"}},i={"Covid Data - Refactored":"Datos Covid - Refactorizada","Covid Data":"Datos Covid",Refactored:"Refactorizada",Close:"Cerrar",About:"Sobre...",Help:"Ayuda",Yes:"S\xed",No:"No",or:"o"},c={locale:"es",App:Object(n.a)({},i),Copyright:Object(n.a)({},i,{"Source code of:":"C\xf3digo fuente de"}),ErrorCatcher:Object(n.a)({},i,{"Something went wrong :(":"Algo ha ido mal :(","Try reloading the app to recover from it":"Intenta recargar la aplicaci\xf3n para continuar"}),Menu:Object(n.a)({},i,{Menu:"Men\xfa","Update!":"\xa1Actualizar!","New update available!":"\xa1Nueva actualizaci\xf3n disponible!"}),ModalRouter:Object(n.a)({},i),About:Object(n.a)({},i,{"This applications displays public information extracted from the official web":"Esta aplicaci\xf3n muestra informaci\xf3n p\xfablica extra\xedda de la p\xe1gina web oficial","The aim of this application is to display the data in different ways than the original, improving performance and adding more value to it.":"El prop\xf3sito de esta aplicaci\xf3n es mostrar los datos de una manera distinta al original, mejorando su rendimiento y a\xf1adi\xe9ndole m\xe1s valor.","Want more information?":"\xbfQuieres saber m\xe1s?","The source code is publicly available.":"El c\xf3digo fuente est\xe1 disponible al p\xfablico.","There, you can find more information about how it has been done, licence and credits.":"Ah\xed puedes encontrar m\xe1s informaci\xf3n sobre c\xf3mo se ha hecho, la licencia y los cr\xe9ditos.","Found a bug? Have a petition? Want to help somehow?":"\xbfHas encontrado un bug? \xbfTienes alguna petici\xf3n? \xbfQuieres ayudar de alguna forma?","Create an issue at GitHub.":"Abre un nuevo issue en GitHub.",Licenses:"Licencias","The application, scripts and documentation in":"La aplicaci\xf3n, scripts y documentaci\xf3n de","this project":"este projecto","are released under the":"est\xe1n publicados bajo la","The scripts and documentation published in":"Los scripts y la documentaci\xf3n publicada en","are also released under the":"tambi\xe9n est\xe1n publicados bajo la","The data scrapped and published in":"Los datos recolectados y publicados en","is licensed by their owner, the":"est\xe1 bajo la licencia de su propietario, ",", under their own conditions (":", bajo sus propias condiciones (",", until now).":", hasta ahora).","See more at the":"Ver m\xe1s en la","dataset API documentation":"documentaci\xf3n de la API del dataset"}),Help:Object(n.a)({},i),WidgetsList:Object(n.a)({},i,{"Add a graph":"A\xf1adir un gr\xe1fico",add:"a\xf1adir"}),PlayPause:Object(n.a)({},i,{"Toggle play status":"Conmutat el estado de reproducci\xf3n",play:"reproducir",pause:"detener"}),Widget:Object(n.a)({},i,{remove:"eliminar",Remove:"Eliminar","Remove?":"Eliminar?","Confirm removal":"Confirmar la eliminaci\xf3n",View:"Ver",Edit:"Editar","Edit map parameters":"Editar las opciones del mapa",Legend:"Leyenda"}),"Widget/Map/Edit":{Type:"Tipo","Select the regions type to show":"Seleccionar el tipo de regiones a mostrar",Values:"Valores","Select the data origin":"Selecciona el origen de los datos"}},l={"Covid Data - Refactored":"Covid Data - Refactored","Covid Data":"Covid Data",Refactored:"Refactored",Close:"Close",About:"About...",Help:"Help",Yes:"Yes",No:"No",or:"or"},s={locale:"en",App:Object(n.a)({},l),Copyright:Object(n.a)({},l,{"Source code of:":"Source code of:"}),ErrorCatcher:Object(n.a)({},l,{"Something went wrong :(":"Something went wrong :(","Try reloading the app to recover from it":"Try reloading the app to recover from it"}),Menu:Object(n.a)({},l,{Menu:"Menu","Update!":"Update!","New update available!":"New update available!"}),ModalRouter:Object(n.a)({},l),About:Object(n.a)({},l,{"This applications displays public information extracted from the official web":"This applications displays public information extracted from the official web","The aim of this application is to display the data in different ways than the original, improving performance and adding more value to it.":"The aim of this application is to display the data in different ways than the original, improving performance and adding more value to it.","Want more information?":"Want more information?","The source code is publicly available.":"The source code is publicly available.","There, you can find more information about how it has been done, licence and credits.":"There, you can find more information about how it has been done, licence and credits.","Found a bug? Have a petition? Want to help somehow?":"Found a bug? Have a petition? Want to help somehow?","Create an issue at GitHub.":"Create an issue at GitHub.",Licenses:"Licenses","The application, scripts and documentation in":"The application, scripts and documentation in","this project":"this project","are released under the":"are released under the","The scripts and documentation published in":"The scripts and documentation published in","are also released under the":"are also released under the","The data scrapped and published in":"The data scrapped and published in","is licensed by their owner, the":"is licensed by their owner, the",", under their own conditions (":", under their own conditions (",", until now).":", until now).","See more at the":"See more at the","dataset API documentation":"dataset API documentation"}),Help:Object(n.a)({},l),WidgetsList:Object(n.a)({},l,{"Add a graph":"Add a graph",add:"add"}),PlayPause:Object(n.a)({},l,{"Toggle play status":"Toggle play status",play:"play",pause:"pause"}),Widget:Object(n.a)({},l,{remove:"remove",Remove:"Remove","Remove?":"Remove?","Confirm removal":"Confirm removal",View:"View",Edit:"Edit","Edit map parameters":"Edit map parameters",Legend:"Legend"}),"Widget/Map/Edit":{Type:"Type","Select the regions type to show":"Select the regions type to show",Values:"Values","Select the data origin":"Select the data origin"}};t.a={en:s,"en-en":s,"en-us":s,"en-au":s,ca:o,"ca-es":o,es:c,"es-es":c}}},[[158,1,2]]]);
//# sourceMappingURL=main.6cd659cc.chunk.js.map